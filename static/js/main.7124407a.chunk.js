(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(4),o=a.n(l),c=(a(17),a(2)),r=a(5),i=a(6),m=a(9),u=a(7),d=a(10),f=a(1),h=a(8),b=a.n(h),v=(a(18),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={name:null,van:null,scooter_qr:null,reason:null,icon:null,notes:"",lat:null,lon:null,scooter_list:[],alert_banner:[],form_list:[]},a.flags={},a.addButton=a.addButton.bind(Object(f.a)(Object(f.a)(a))),a.setVan=a.setVan.bind(Object(f.a)(Object(f.a)(a))),a.setName=a.setName.bind(Object(f.a)(Object(f.a)(a))),a.setName=a.setName.bind(Object(f.a)(Object(f.a)(a))),a.setReason=a.setReason.bind(Object(f.a)(Object(f.a)(a))),a.setLatLon=a.setLatLon.bind(Object(f.a)(Object(f.a)(a))),a.setScooter=a.setScooter.bind(Object(f.a)(Object(f.a)(a))),a.setNotes=a.setNotes.bind(Object(f.a)(Object(f.a)(a))),a.getGPS=a.getGPS.bind(Object(f.a)(Object(f.a)(a))),a.validate=a.validate.bind(Object(f.a)(Object(f.a)(a))),a.addNewScooter=a.addNewScooter.bind(Object(f.a)(Object(f.a)(a))),a.removeAllScooters=a.removeAllScooters.bind(Object(f.a)(Object(f.a)(a))),a.submitForms=a.submitForms.bind(Object(f.a)(Object(f.a)(a))),a.formSuccess=a.formSuccess.bind(Object(f.a)(Object(f.a)(a))),a.formFail=a.formFail.bind(Object(f.a)(Object(f.a)(a))),a.setFlag=a.setFlag.bind(Object(f.a)(Object(f.a)(a))),a.setFlagEvent=a.setFlagEvent.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(e){window.localStorage.getItem("name")?(this.setState({name:window.localStorage.getItem("name")}),console.log(window.localStorage.getItem("name"))):console.log("no name"),window.localStorage.getItem("van")?this.setState({van:window.localStorage.getItem("van")}):console.log("no van")}},{key:"componentWillUpdate",value:function(){for(var e in console.log("FLAGS:"),this.flags)this.flags[e]&&console.log(e+"->"+this.flags[e])}},{key:"componentDidUpdate",value:function(e){console.log("updated",this.state),this.state.name&&window.localStorage.setItem("name",this.state.name),this.state.van&&window.localStorage.setItem("van",this.state.van),console.log(this.state.alert_banner),console.log("state saved",window.localStorage.getItem("name"))}},{key:"setFlag",value:function(e,t){this.flags[e]=t}},{key:"setFlagEvent",value:function(e){console.log("ID: "+e.currentTarget.id);var t=e.currentTarget.id;this.flags[t]=e.target.value}},{key:"getFlags",value:function(){for(var e in this.flags)this.flags[e]&&console.log(e+"->"+this.flags[e])}},{key:"addButton",value:function(e,t,a){return s.a.createElement("button",{type:"button",name:e,className:"btn btn-select btn-lg col-6 col-md-2",onClick:a},s.a.createElement("i",{className:t})," ",s.a.createElement("br",null)," ",e," ")}},{key:"setVan",value:function(e){var t=parseInt(e.target.value);Number.isInteger(t)||(t=null),this.setState({van:t})}},{key:"setName",value:function(e){var t=e.target.value;this.setState({name:t})}},{key:"setReason",value:function(e){this.getGPS();var t=e.currentTarget.name;console.log(e.currentTarget.name),this.setState({reason:t,icon:e.currentTarget.children[0].className})}},{key:"setScooter",value:function(e){var t=e.target.value;this.setState({scooter_qr:t})}},{key:"setNotes",value:function(e){var t=e.target.value;this.setFlagEvent(e),this.setState({notes:t})}},{key:"setLatLon",value:function(e){var t=e.coords.latitude,a=e.coords.longitude;console.log(a.toPrecision(5)),this.setState({lat:t,lon:a})}},{key:"getGPS",value:function(){var e="GPS is not available";navigator.geolocation&&(e="Loading GPS...",navigator.geolocation.getCurrentPosition(this.setLatLon)),null!=this.state.lat&&null!=this.state.lon||this.setState({lat:e}),console.log(e)}},{key:"validate",value:function(){var e=!1;if(null==this.state.name||""===this.state.name||null==this.state.van){var t=s.a.createElement("div",{key:"name_or_van",className:"alert alert-warning",role:"alert"},"Check Name / Van #");console.log("no name or van"),this.setFlag("alert_banner",t),this.setState({alert_banner:[].concat(Object(c.a)(this.state.alert_banner),[t])})}else if(this.state.reason)if(null==this.state.lat||null==this.state.lon){var a=s.a.createElement("div",{key:"gps",className:"alert alert-warning",role:"alert"},"GPS error");this.setState({alert_banner:[].concat(Object(c.a)(this.state.alert_banner),[a])})}else console.log("Scooter entry is valid"),e=!0,this.setState({alert_banner:null});else{var n=s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Select a Pick Up Reason");this.setState({alert_banner:[].concat(Object(c.a)(this.state.alert_banner),[n])})}return console.log(e),e}},{key:"validateGPS",value:function(){return!1}},{key:"addNewScooter",value:function(){if(this.validate()){var e=new FormData;console.log("appending to form"),e.append("name",this.state.name),e.append("van",this.state.van),e.append("number",this.state.scooter_qr),e.append("reason",this.state.reason),e.append("notes",this.state.notes),e.append("lat",this.state.lat),e.append("lon",this.state.lon),this.setState({form_list:[].concat(Object(c.a)(this.state.form_list),[e])}),console.log(e.values());var t=s.a.createElement("li",{key:this.state.scooter_list.length,className:"list-group-item bg-dark my-3 "},s.a.createElement("p",{className:"text-muted text-tiny mt-1"}," Scooter: ",this.state.scooter_qr," | ",this.state.reason," ",s.a.createElement("i",{className:this.state.icon})," | ",this.state.lat.toPrecision(6),", ",this.state.lon.toPrecision(7)),s.a.createElement("p",{className:""!==this.state.notes?"d-block text-muted text-tiny mb-1":"d-none"}," Notes: ",this.state.notes," "));this.setState({scooter_list:[].concat(Object(c.a)(this.state.scooter_list),[t]),reason:null,scooter_qr:null,notes:null})}}},{key:"removeAllScooters",value:function(e){this.setState({scooter_list:[]})}},{key:"submitForms",value:function(){for(var e=this,t=this.state.form_list.length-1;t>=0;t--)console.log(this.state.form_list[t].get("name")),fetch("https://script.google.com/macros/s/AKfycbzlydGL03jh3jxkNgDuMoDo7hG5c6123TnLxnIJjXuUD4vnL6k/exec",{method:"POST",mode:"no-cors",body:this.state.form_list[t]}).then(function(){return e.formSuccess()}).catch(function(t){return e.formFail(t)}),console.log(this.state.form_list[t])}},{key:"formSuccess",value:function(){var e=s.a.createElement("div",{className:"alert alert-success",role:"alert"},"Success!");this.setState({scooter_qr:null,reason:null,icon:null,notes:"",lat:null,lon:null,scooter_list:[],alert_banner:[e],form_list:[]})}},{key:"formFail",value:function(e){console.error("Error!",e.message);var t=s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Post database failed: ",e.message);this.setState({alert_banner:[t]})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("img",{className:"App-logo",alt:"JUMP",src:b.a}),s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",{className:"display-4 text-center"},"Scooter Recovery"),s.a.createElement("div",{className:"d-flex justify-content-end bd-highlight flex-row mt-0"},s.a.createElement("input",{type:"text",placeholder:this.state.name?this.state.name:"Name",className:"form-control col m-2 flex-fill",id:"name",onChange:function(t){return e.setName(t)}}),s.a.createElement("input",{type:"number",placeholder:this.state.van?this.state.van:"Van #",className:"form-control col m-2 flex-fill",id:"van",onChange:function(t){return e.setVan(t)}}))),s.a.createElement("div",{className:"App-body"},s.a.createElement("div",{className:"row container-fluid m-2"},this.addButton("Broken","fas fa-tools",function(t){return e.setReason(t)}),this.addButton("Vandalized","fas fa-exclamation-triangle",function(t){return e.setReason(t)}),this.addButton("Soft Broken","fas fa-cogs",function(t){return e.setReason(t)}),this.addButton("Stolen/Lost","fas fa-eye-slash",function(t){return e.setReason(t)}),this.addButton("Recovery","fas fa-plus",function(t){return e.setReason(t)}),this.addButton("Rebalance","fas fa-sign-out-alt",function(t){return e.setReason(t)})),s.a.createElement("div",{className:"card text-white bg-dark text-center m-2 mb-5"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"text-light lead m-0"},this.state.reason?this.state.reason:"Select Pick Up Reason"," ",s.a.createElement("i",{className:this.state.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"number",placeholder:"Scooter #",className:"form-control",onFocus:function(e){return e.target.value=""},onChange:function(t){return e.setScooter(t)}}),s.a.createElement("input",{type:"text",placeholder:"Notes",className:"form-control",id:"notes",onChange:function(t){return e.setNotes(t)}}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(t){return e.addNewScooter(t)},type:"button"},s.a.createElement("i",{className:"fas fa-plus-circle"})," Add"))),s.a.createElement("div",{className:"text-tiny my-2"},this.state.alert_banner),s.a.createElement("ul",{className:"list-group bg-dark text-center mx-auto mt-3"},this.state.scooter_list),s.a.createElement("div",{className:this.state.scooter_list.length?"d-flex justify-content-end bd-highlight flex-row":"d-none"},s.a.createElement("button",{className:"btn btn-danger p-2 flex-fill",onClick:function(){return e.removeAllScooters()}},s.a.createElement("i",{className:"fas fa-undo"})," Reset"),s.a.createElement("p",{className:"p-2 flex-fill"}," "),s.a.createElement("button",{className:"btn btn-success p-2 flex-fill",onClick:function(){return e.submitForms()}},s.a.createElement("i",{className:"fas fa-success"})," Submit"))),s.a.createElement("div",{className:"card-footer text-muted text-tiny m-0"},s.a.createElement("div",{className:"d-flex justify-content-center flex-row m-0"},s.a.createElement("div",{className:this.state.name?"d-block p-2 flex-fill":"d-none"},"Field Tech: ",this.state.name),s.a.createElement("div",{className:this.state.name&&this.state.van?"d-block p-2 flex-fill":"d-none"},"|"),s.a.createElement("div",{className:this.state.van?"d-block p-2 flex-fill":"d-none"},"Van: ",this.state.van),s.a.createElement("div",{className:"d-block p-2 flex-fill"},"|"),s.a.createElement("div",{className:this.state.lat?"d-block p-2 flex-fill":"d-none"},"Lat: ",this.state.lat,", Lon: ",this.state.lon),s.a.createElement("div",{className:"d-block p-2 flex-fill"},"|"),s.a.createElement("div",{className:"d-block p-2 flex-fill"},(new Date).toString()))))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a.p+"static/media/JUMP_Bleed.d8de6b7d.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.7124407a.chunk.js.map