(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(4),l=a.n(o),c=(a(18),a(2)),r=a(5),i=a(6),m=a(10),u=a(7),d=a(11),f=a(1),h=a(8),b=a.n(h),g=a(9),v=a.n(g),p=(a(19),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).responseGoogle=function(e){console.log(e),e&&a.setState({gresponse:e,name:e.profileObj.name,accessToken:e.accessToken})},a.state={timestamp:null,accessToken:null,name:null,van:null,scooter_qr:null,reason:null,icon:null,notes:"",lat:null,lon:null,scooter_list:[],alert_banner:[],sheetLoaded:!1,form_list:[]},a.addButton=a.addButton.bind(Object(f.a)(Object(f.a)(a))),a.setVan=a.setVan.bind(Object(f.a)(Object(f.a)(a))),a.setName=a.setName.bind(Object(f.a)(Object(f.a)(a))),a.setName=a.setName.bind(Object(f.a)(Object(f.a)(a))),a.setReason=a.setReason.bind(Object(f.a)(Object(f.a)(a))),a.setLatLon=a.setLatLon.bind(Object(f.a)(Object(f.a)(a))),a.setScooter=a.setScooter.bind(Object(f.a)(Object(f.a)(a))),a.setNotes=a.setNotes.bind(Object(f.a)(Object(f.a)(a))),a.getGPS=a.getGPS.bind(Object(f.a)(Object(f.a)(a))),a.setAlert=a.setAlert.bind(Object(f.a)(Object(f.a)(a))),a.validate=a.validate.bind(Object(f.a)(Object(f.a)(a))),a.addNewScooter=a.addNewScooter.bind(Object(f.a)(Object(f.a)(a))),a.removeScooters=a.removeScooters.bind(Object(f.a)(Object(f.a)(a))),a.submitForms=a.submitForms.bind(Object(f.a)(Object(f.a)(a))),a.formSuccess=a.formSuccess.bind(Object(f.a)(Object(f.a)(a))),a.formFail=a.formFail.bind(Object(f.a)(Object(f.a)(a))),a.showQuarantineInfo=a.showQuarantineInfo.bind(Object(f.a)(Object(f.a)(a))),a.clearAlertBanner=a.clearAlertBanner.bind(Object(f.a)(Object(f.a)(a))),a.responseGoogle=a.responseGoogle.bind(Object(f.a)(Object(f.a)(a))),a.vanFocus=a.vanFocus.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(e){this.setState({timestamp:Date.now()}),window.localStorage.getItem("name")?(this.setState({name:window.localStorage.getItem("name")}),console.log(window.localStorage.getItem("name"))):console.log("no name"),window.localStorage.getItem("van")?this.setState({van:window.localStorage.getItem("van")}):console.log("no van"),window.localStorage.getItem("accessToken")&&this.setState({accessToken:window.localStorage.getItem("accessToken")}),this.getGPS()}},{key:"componentWillUpdate",value:function(){for(var e in console.log("FLAGS:"),this.flags)this.flags[e]&&console.log(e+"->"+this.flags[e])}},{key:"componentDidUpdate",value:function(e){console.log("updated",this.state),this.state.name&&window.localStorage.setItem("name",this.state.name),this.state.van&&window.localStorage.setItem("van",this.state.van),this.state.accessToken&&window.localStorage.setItem("accessToken",this.state.accessToken),console.log("Alerts: ",this.state.alert_banner),console.log("Scooters: ",this.state.scooter_list),console.log("state saved",window.localStorage.getItem("name"))}},{key:"addButton",value:function(e,t,a){return s.a.createElement("button",{type:"button",name:e,className:"btn btn-select btn-lg col-6 col-md-2",onClick:a},s.a.createElement("i",{className:t})," ",s.a.createElement("br",null)," ",e," ")}},{key:"setVan",value:function(e){var t=parseInt(e.target.value);Number.isInteger(t)||(t=null),this.setState({van:t})}},{key:"setName",value:function(e){var t=e.target.value;this.setState({name:t})}},{key:"setReason",value:function(e){this.getGPS();var t=e.currentTarget.name;console.log(e.currentTarget.name),this.setState({reason:t,icon:e.currentTarget.children[0].className})}},{key:"setScooter",value:function(e){var t=Date.now();console.log("time is ",t);var a=e.target.value;this.setState({scooter_qr:a,timestamp:t})}},{key:"setNotes",value:function(e){var t=e.target.value;this.setFlagEvent(e),this.setState({notes:t})}},{key:"setLatLon",value:function(e){var t=e.coords.latitude,a=e.coords.longitude;console.log(a.toPrecision(5)),this.setState({lat:t,lon:a})}},{key:"setAlert",value:function(e){var t=!1;for(var a in console.log(e.key),this.state.alert_banner)e.key===this.state.alert_banner[a].key&&(t=!0);t||(console.log("adding alert"),this.setState({alert_banner:[].concat(Object(c.a)(this.state.alert_banner),[e])}))}},{key:"vanFocus",value:function(){document.getElementById("van").focus()}},{key:"showQuarantineInfo",value:function(){var e=this,t=s.a.createElement("div",{id:"quarantine",key:"quarantine",className:"alert alert-danger",role:"alert",onClick:function(t){return e.clearAlertBanner(t)}},s.a.createElement("h3",null,"Do Not Attempt Recovery!"),s.a.createElement("p",null,"Contact JUMP Quarantine Specialist (123) 456-7890"));this.setAlert(t)}},{key:"getGPS",value:function(){var e="GPS is not available";navigator.geolocation&&(e="Loading GPS...",navigator.geolocation.getCurrentPosition(this.setLatLon)),null!=this.state.lat&&null!=this.state.lon||this.setState({lat:e}),console.log(e)}},{key:"validate",value:function(){var e=!1;if(null==this.state.name||""===this.state.name||null==this.state.van){var t=s.a.createElement("div",{key:"name_or_van",className:"alert alert-warning",role:"alert"},"Check Name / Van #");console.log("no name or van"),this.setAlert(t)}else if(this.state.reason)if(null==this.state.lat||null==this.state.lon){var a=s.a.createElement("div",{key:"gps",className:"alert alert-warning",role:"alert"},"Waiting For GPS... Please Try Again");this.setAlert(a)}else{var n=Date.now();console.log("Scooter entry is valid"),e=!0,this.setState({alert_banner:[],timestamp:n})}else{var o=s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Select a Pick Up Reason");this.setAlert(o)}return console.log(e),e}},{key:"addNewScooter",value:function(){var e=this;if(this.validate()){var t=new FormData;console.log("appending to form"),t.append("name",this.state.name),t.append("van",this.state.van),t.append("number",this.state.scooter_qr),t.append("reason",this.state.reason),t.append("notes",this.state.notes),t.append("lat",this.state.lat),t.append("lon",this.state.lon),this.setState({form_list:[].concat(Object(c.a)(this.state.form_list),[t])}),console.log(t.values());var a=s.a.createElement("li",{key:this.state.timestamp,className:"list-group-item bg-secondary my-3 clearfix flex-row text-tiny"},s.a.createElement("button",{key:this.state.timestamp,id:this.state.timestamp,className:"float-left flex-fill btn-lg btn-secondary my-auto",onClick:function(t){return e.removeScooters(t)}},s.a.createElement("i",{className:"fa fa-trash d-none"})),s.a.createElement("p",{className:"flex-fill text-white my-auto"}," Scooter: ",this.state.scooter_qr," | ",this.state.reason," ",s.a.createElement("i",{className:this.state.icon})," | ",this.state.lat.toPrecision(6),", ",this.state.lon.toPrecision(7)),s.a.createElement("span",{className:""!==this.state.notes?"d-block text-light flex-fill mb-0":"d-none m-0"}," Notes: ",this.state.notes));this.setState({scooter_list:[].concat(Object(c.a)(this.state.scooter_list),[a]),reason:null,icon:null,scooter_qr:null,notes:"",logo:null,lat:null,lon:null})}}},{key:"removeScooters",value:function(e){var t=this.state.scooter_list;if(e){for(var a in this.state.scooter_list)if(console.log("looking for",e.currentTarget.id,"in: ",this.state.scooter_list[a].key,(e.currentTarget.id,this.state.scooter_list[a].key,a)),t[a].key===e.currentTarget.id){console.log("match!",t[a].key,a);t.pop(t[a-1]);console.log("popping",a),this.setState({scooter_list:t})}}else console.log("no event passed"),this.setState({scooter_list:[]})}},{key:"submitForms",value:function(){for(var e=this,t=this.state.form_list.length-1;t>=0;t--){console.log(this.state.form_list[t].get("name"));var a={method:"POST",headers:{Origin:"https://d16vo7sc458jxh.cloudfront.net","Access-Control-Allow-Origin":"https://d16vo7sc458jxh.cloudfront.net",Authorization:"Bearer "+this.state.accessToken},mode:"no-cors",body:this.state.form_list[t]};fetch("https://script.google.com/macros/s/AKfycbx5D77_LXUeVqB1vEsHvKH9JPUpL8meAXLmbFPd_ar-CEAE3j0/exec",a).then(function(t){return e.formSuccess(t)}).catch(function(t){return e.formFail(t)}),console.log(this.state.form_list[t])}}},{key:"formSuccess",value:function(e){if(console.log(e),0===e.status){var t=s.a.createElement("div",{className:"alert alert-success",role:"alert"},s.a.createElement("h3",null,"Success!"));this.setState({scooter_qr:null,reason:null,icon:null,notes:"",lat:null,lon:null,scooter_list:[],alert_banner:[t],form_list:[]})}else this.formFail(e)}},{key:"formFail",value:function(e){console.error("Error!",e.message);var t=s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Post database failed! ",e.message);this.setState({alert_banner:[].concat(Object(c.a)(this.state.alert_banner),[t])})}},{key:"clearAlertBanner",value:function(){this.setState({alert_banner:[]})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("img",{className:"App-logo",alt:"JUMP",src:v.a}),s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",{className:"display-4 text-center"},"Scooter Recovery"),s.a.createElement("div",{className:"d-flex justify-content-end bd-highlight flex-row mt-0"},s.a.createElement(b.a,{prompt:"consent",accessType:"offline",clientId:"177851411303-58lo72904agk36g0a761601q34ku8953.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle}),s.a.createElement("div",{className:"input-group ml-3"},s.a.createElement("input",{type:"number",pattern:"\\d*",placeholder:this.state.van?this.state.van:"",className:"form-control form-control-lg flex-fill",id:"van",name:"van",min:"0",max:"9",onChange:function(t){return e.setVan(t)}}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{className:"btn btn-lg btn-outline-secondary",onClick:function(){return e.vanFocus()},type:"button"},s.a.createElement("i",{className:"fas fa-shuttle-van p-0 m-0"})," Van #")))),s.a.createElement("h4",{className:"my-3"},this.state.accessToken?this.state.name:"Please Log In")),s.a.createElement("div",{className:"App-body"},s.a.createElement("div",{className:"row container-fluid my-auto mx-2"},this.addButton("Maintenance","fas fa-tools",function(t){return e.setReason(t)}),this.addButton("Vandalized","fas fa-exclamation-triangle",function(t){return e.setReason(t)}),this.addButton("Soft Broken","fas fa-cogs",function(t){return e.setReason(t)}),this.addButton("Stolen/Lost","fas fa-eye-slash",function(t){return e.setReason(t)}),this.addButton("Recovery","fas fa-plus",function(t){return e.setReason(t)}),this.addButton("Rebalance","fas fa-sign-out-alt",function(t){return e.setReason(t)})),s.a.createElement("div",{className:"card text-white bg-dark text-center my-auto mx-3 mb-4"},s.a.createElement("div",{className:"card-header"},s.a.createElement("h3",{className:"text-light m-0"},this.state.reason?this.state.reason:"Select Pick Up Reason"," ",s.a.createElement("i",{className:this.state.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"number",placeholder:"Scooter #",className:"form-control form-control-lg",onFocus:function(e){return e.target.value=""},onChange:function(t){return e.setScooter(t)}}),s.a.createElement("input",{type:"text",placeholder:"Notes",className:"form-control form-control-lg",id:"notes",onChange:function(t){return e.setNotes(t)}}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{className:"btn btn-lg btn-outline-secondary",onClick:function(t){return e.addNewScooter(t)},type:"button"},s.a.createElement("i",{className:"fas fa-plus-circle"}),"  Add"))),s.a.createElement("div",{className:"lead my-2"},this.state.alert_banner),s.a.createElement("ul",{className:"list-group bg-dark text-center mx-auto mt-3"},this.state.scooter_list),s.a.createElement("div",{className:"d-flex justify-content-end bd-highlight"},s.a.createElement("button",{className:this.state.alert_banner.length?"btn btn-outline-secondary text-center p-2 flex-fill":"d-none",onClick:function(){return e.clearAlertBanner()}},s.a.createElement("i",{className:"fas fa-success"})," Clear Alerts"),s.a.createElement("div",{className:this.state.scooter_list.length?"flex-row flex-fill my-auto":"d-none"},s.a.createElement("button",{className:"btn btn-danger m-2 flex-fill",onClick:function(){return e.removeScooters()}},s.a.createElement("i",{className:"fas fa-undo"})," Reset"),s.a.createElement("button",{className:"btn btn-success m-2 flex-fill",onClick:function(){return e.submitForms()}},s.a.createElement("i",{className:"fas fa-success"})," Submit")))),s.a.createElement("div",{className:"card-footer text-muted text-tiny m-0"},s.a.createElement("div",{className:"d-flex justify-content-center flex-row m-0"},s.a.createElement("div",{className:this.state.name?"d-block p-2 flex-fill":"d-none"},"Field Tech: ",this.state.name),s.a.createElement("div",{className:this.state.name&&this.state.van?"d-block p-2 flex-fill":"d-none"},"|"),s.a.createElement("div",{className:this.state.van?"d-block p-2 flex-fill":"d-none"},"Van: ",this.state.van),s.a.createElement("div",{className:"d-block p-2 flex-fill"},"|"),s.a.createElement("div",{className:this.state.lat?"d-block p-2 flex-fill":"d-none"},"Lat: ",this.state.lat,", Lon: ",this.state.lon),s.a.createElement("div",{className:"d-block p-2 flex-fill"},"|"),s.a.createElement("div",{className:"d-block p-2 flex-fill"},(new Date).toString())))),s.a.createElement("button",{className:"btn btn-lg btn-danger mt-5 mb-1",onClick:function(){return e.showQuarantineInfo()}},s.a.createElement("i",{className:"fas fa-radiation p-2"})," Scooter Quarantine ",s.a.createElement("i",{className:"fas fa-radiation p-2"})," ")))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a.p+"static/media/JUMP_Bleed.d8de6b7d.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.c6765325.chunk.js.map